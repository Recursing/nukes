(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function A(){}function re(e){return e()}function X(){return Object.create(null)}function S(e){e.forEach(re)}function ie(e){return typeof e=="function"}function fe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let T;function Y(e,t){return T||(T=document.createElement("a")),T.href=t,e===T.href}function de(e){return Object.keys(e).length===0}function c(e,t){e.appendChild(t)}function oe(e,t,n){e.insertBefore(t,n||null)}function G(e){e.parentNode&&e.parentNode.removeChild(e)}function me(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function b(){return L(" ")}function Z(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _e(e){return Array.from(e.childNodes)}function q(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function x(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let P;function E(e){P=e}function he(){if(!P)throw new Error("Function called outside component initialization");return P}function pe(e){he().$$.on_mount.push(e)}const v=[],ee=[],C=[],te=[],ge=Promise.resolve();let H=!1;function ye(){H||(H=!0,ge.then(ae))}function J(e){C.push(e)}const I=new Set;let w=0;function ae(){if(w!==0)return;const e=P;do{try{for(;w<v.length;){const t=v[w];w++,E(t),be(t.$$)}}catch(t){throw v.length=0,w=0,t}for(E(null),v.length=0,w=0;ee.length;)ee.pop()();for(let t=0;t<C.length;t+=1){const n=C[t];I.has(n)||(I.add(n),n())}C.length=0}while(v.length);for(;te.length;)te.pop()();H=!1,I.clear(),E(e)}function be(e){if(e.fragment!==null){e.update(),S(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}const we=new Set;function ve(e,t){e&&e.i&&(we.delete(e),e.i(t))}function $e(e,t,n,r){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),r||J(()=>{const f=e.$$.on_mount.map(re).filter(ie);e.$$.on_destroy?e.$$.on_destroy.push(...f):S(f),e.$$.on_mount=[]}),o.forEach(J)}function ke(e,t){const n=e.$$;n.fragment!==null&&(S(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function De(e,t){e.$$.dirty[0]===-1&&(v.push(e),ye(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Le(e,t,n,r,l,o,f,h=[-1]){const m=P;E(e);const i=e.$$={fragment:null,ctx:[],props:o,update:A,not_equal:l,bound:X(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:X(),dirty:h,skip_bound:!1,root:t.target||m.$$.root};f&&f(i.root);let u=!1;if(i.ctx=n?n(e,t.props||{},(a,g,...s)=>{const y=s.length?s[0]:g;return i.ctx&&l(i.ctx[a],i.ctx[a]=y)&&(!i.skip_bound&&i.bound[a]&&i.bound[a](y),u&&De(e,a)),g}):[],i.update(),u=!0,S(i.before_update),i.fragment=r?r(i.ctx):!1,t.target){if(t.hydrate){const a=_e(t.target);i.fragment&&i.fragment.l(a),a.forEach(G)}else i.fragment&&i.fragment.c();t.intro&&ve(e.$$.fragment),$e(e,t.target,t.anchor,t.customElement),ae()}E(m)}class Ee{$destroy(){ke(this,1),this.$destroy=A}$on(t,n){if(!ie(n))return A;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(t){this.$$set&&!de(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function K(e){return e==null?void 0:e.toLocaleString(void 0,{style:"percent",maximumFractionDigits:2})}async function se(e){return await(await fetch(e)).json()}async function Ae(){const t=["https://manifold.markets/jack/will-a-nuclear-weapon-detonate-in-n-6edbcd23a9f1","https://manifold.markets/AndyMartin/will-a-nuclear-weapon-be-launched-i-015e44ed91f5","https://manifold.markets/AmmonLam/will-a-nuclear-weapon-cause-over-10"].map(async n=>{const r=n.split("/").pop(),l=await se("https://manifold.markets/api/v0/slug/"+r);return l.lastUpdatedTime,{url:n,title:"Manifold: "+l.question,probability:K(l.probability),embed_url:n.replace("manifold.markets/","manifold.markets/embed/"),close_time:l.closeTime,last_activity_time:l.lastUpdatedTime}});return Promise.all(t)}async function Pe(){return(await se("https://large-goose-21.deno.dev")).map(n=>{var r,l,o;return{url:`https://www.metaculus.com${n.page_url}`,title:"Metaculus: "+n.title_short,probability:(n.metaculus_prediction?K((r=n.metaculus_prediction)==null?void 0:r.full)+" (metaculus), ":"")+(K((o=(l=n.community_prediction)==null?void 0:l.full)==null?void 0:o.q2)+" (community)"),embed_url:`https://www.metaculus.com/questions/embed/${n.id}`,close_time:new Date(n.close_time).getTime(),last_activity_time:new Date(n.last_activity_time).getTime()}})}async function Se(){const e=await Ae(),t=await Pe();return[...e,...t]}function ne(e,t,n){const r=e.slice();return r[3]=t[n],r[4]=t,r[5]=n,r}function le(e){let t,n,r,l,o=e[3].title+"",f,h,m,i,u,a,g,s,y=e[3].probability+"",z,Q,$,j=new Date(e[3].close_time).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})+"",F,M,R,k,N=new Date(e[3].last_activity_time).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})+"",U,O,V,B,W;function ce(){return e[1](e[3],e[4],e[5])}function ue(){return e[2](e[3],e[4],e[5])}return{c(){t=_("tr"),n=_("td"),r=_("p"),l=_("a"),f=L(o),m=b(),i=_("iframe"),g=b(),s=_("td"),z=L(y),Q=b(),$=_("td"),F=L(j),R=b(),k=_("td"),U=L(N),V=b(),d(l,"href",h=e[3].url),x(i,"display",e[3].active?"block":"none"),Y(i.src,u=e[3].embed_url)||d(i,"src",u),d(i,"title",a=e[3].title),d(i,"frameborder","0"),d(i,"width","600"),d(i,"height","300"),d(i,"class","svelte-9574zj"),d(r,"class","svelte-9574zj"),d($,"style",M=e[3].close_time<=Date.now()?"color:red":""),d(k,"style",O=e[3].last_activity_time>Date.now()?"color:red":"")},m(D,p){oe(D,t,p),c(t,n),c(n,r),c(r,l),c(l,f),c(r,m),c(r,i),c(t,g),c(t,s),c(s,z),c(t,Q),c(t,$),c($,F),c(t,R),c(t,k),c(k,U),c(t,V),B||(W=[Z(r,"mouseenter",ce),Z(r,"mouseleave",ue)],B=!0)},p(D,p){e=D,p&1&&o!==(o=e[3].title+"")&&q(f,o),p&1&&h!==(h=e[3].url)&&d(l,"href",h),p&1&&x(i,"display",e[3].active?"block":"none"),p&1&&!Y(i.src,u=e[3].embed_url)&&d(i,"src",u),p&1&&a!==(a=e[3].title)&&d(i,"title",a),p&1&&y!==(y=e[3].probability+"")&&q(z,y),p&1&&j!==(j=new Date(e[3].close_time).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})+"")&&q(F,j),p&1&&M!==(M=e[3].close_time<=Date.now()?"color:red":"")&&d($,"style",M),p&1&&N!==(N=new Date(e[3].last_activity_time).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})+"")&&q(U,N),p&1&&O!==(O=e[3].last_activity_time>Date.now()?"color:red":"")&&d(k,"style",O)},d(D){D&&G(t),B=!1,S(W)}}}function je(e){let t,n,r,l,o,f,h,m,i=e[0],u=[];for(let a=0;a<i.length;a+=1)u[a]=le(ne(e,i,a));return{c(){t=_("main"),n=_("h1"),n.textContent="Are we getting nuked?",r=b(),l=_("div"),o=_("table"),f=_("thead"),f.innerHTML=`<tr><th>Prediction</th> 
          <th>Probability</th> 
          <th>Close Date</th> 
          <th>Last Update</th></tr>`,h=b(),m=_("tbody");for(let a=0;a<u.length;a+=1)u[a].c();d(n,"class","svelte-9574zj"),d(l,"class","card")},m(a,g){oe(a,t,g),c(t,n),c(t,r),c(t,l),c(l,o),c(o,f),c(o,h),c(o,m);for(let s=0;s<u.length;s+=1)u[s].m(m,null)},p(a,[g]){if(g&1){i=a[0];let s;for(s=0;s<i.length;s+=1){const y=ne(a,i,s);u[s]?u[s].p(y,g):(u[s]=le(y),u[s].c(),u[s].m(m,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=i.length}},i:A,o:A,d(a){a&&G(t),me(u,a)}}}function Me(e,t,n){let r=[];return pe(async()=>{n(0,r=(await Se()).map(f=>({...f,active:!1})))}),[r,(f,h,m)=>{n(0,h[m].active=!0,r)},(f,h,m)=>{n(0,h[m].active=!1,r)}]}class Ne extends Ee{constructor(t){super(),Le(this,t,Me,je,fe,{})}}new Ne({target:document.getElementById("app")});
